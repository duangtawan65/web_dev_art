{% extends "base.html" %}

{% block main %}
<div class="h-screen bg-black text-white">
  <div class="max-w-4xl w-full mx-auto p-8">

    <!-- Header - Information -->
    <h2 class="text-5xl font-bold mb-10  bg-gradient-to-r from-green-400 via-blue-500 to-purple-600 text-transparent bg-clip-text uppercase">PROFILE</h2>

    <!-- Create grid for layout with updated content -->
    <div class="grid grid-cols-3 gap-10">
      <!-- Left Side (Field Titles) -->
      <div>
        <p class="text-xl mb-8 uppercase text-gray-500 leading-loose">Username</p>
        <p class="text-xl mb-8 uppercase text-gray-500 leading-loose">Email</p>
        <p class="text-xl mb-8 uppercase text-gray-500 leading-loose">Quote</p>
        <p class="text-xl mb-8 uppercase text-gray-500 leading-loose">Facebook</p>
        <p class="text-xl mb-8 uppercase text-gray-500 leading-loose">X</p>
        <p class="text-xl mb-8 uppercase text-gray-500 leading-loose">Instagram</p>
      </div>

      <!-- Right Side (User Data from Database) -->
      <div class="col-span-2">
        <p class="text-lg mb-8 leading-loose">{{ viewed_user.username }}</p>
        <p class="text-lg mb-8 leading-loose">{{ viewed_user.email }}</p>
        <p class="text-lg mb-8 leading-loose">{{ profile.quote|default:"None" }}</p>
        <p class="text-lg mb-8 leading-loose">
          {% if profile.facebook_url %}
            <a href="{{ profile.facebook_url }}" class="underline">Facebook</a>
          {% else %}
            None
          {% endif %}
        </p>
        <p class="text-lg mb-8 leading-loose">
          {% if profile.X_url %}
            <a href="{{ profile.X_url }}" class="underline">X</a>
          {% else %}
            None
          {% endif %}
        </p>
        <p class="text-lg mb-8 leading-loose">
          {% if profile.instagram_url %}
            <a href="{{ profile.instagram_url }}" class="underline">Instagram</a>
          {% else %}
            None
          {% endif %}
        </p>

        <!-- จำนวน Followers และ Following -->
        <div class="mt-6 text-lg">
          <span>{{ followers_count }} Followers</span> |
          <span>{{ following_count }} Following</span>
        </div>
      </div>
    </div>

    <!-- ปุ่ม Follow/Unfollow -->
    {% if user != viewed_user %}
      <div class="mt-8 text-center">
        {% if is_following %}
          <form method="post" action="{% url 'unfollow' viewed_user.username %}">
            {% csrf_token %}
            <button type="submit" class="py-2 px-4 bg-red-500 hover:bg-red-700 text-white font-semibold rounded-lg shadow-md">Unfollow</button>
          </form>
        {% else %}
          <form method="post" action="{% url 'follow' viewed_user.username %}">
            {% csrf_token %}
            <button type="submit" class="py-2 px-4 bg-blue-500 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md">Follow</button>
          </form>
        {% endif %}
      </div>
    {% endif %}

    <!-- Edit Profile Button (แสดงเมื่อเป็นโปรไฟล์ของตัวเอง) -->
    {% if user == viewed_user %}
      <div class="mt-12 text-center">
        <a href="{% url 'edit_profile' %}" class="py-3 px-6 bg-blue-500 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md">
          Edit Profile
        </a>
      </div>
    {% endif %}

    <!-- ปุ่มชม Work Gallery -->
    <div class="mt-12 text-center">
      <a href="{% url 'work_gallery' username=viewed_user.username %}" class="py-3 px-6 bg-green-500 hover:bg-green-700 text-white font-semibold rounded-lg shadow-md">
         Work Gallery
      </a>
    </div>

  </div>
</div>
{% endblock %}
